apiVersion: v1
items:
- apiVersion: v1
  data:
    bookmarks.yaml: ""
    docker.yaml: ""
    kubernetes.yaml: |
      mode: cluster
    services.yaml: |
      - Infrastructure:
        - ArgoCD:
            description: GitOps CD
            href: http://192.168.8.197:30443
            icon: argocd.svg
        - Keycloak:
            description: Identity Management
            href: http://192.168.8.197:30080
            icon: keycloak.svg
        - KubeView:
            description: Cluster Visualization
            href: https://holm.chat/kubeview
            icon: kubernetes.svg
        - Pi-hole:
            description: Network Ad Blocker
            href: http://192.168.8.209:80
            icon: pi-hole.svg
        - Tekton:
            description: CI/CD Pipelines
            href: http://192.168.8.197:30097
            icon: tekton.svg
        - Registry UI:
            description: Container Registry
            href: http://192.168.8.197:31750
            icon: docker.svg
      - Monitoring:
        - Grafana:
            description: Metrics Dashboard
            href: http://192.168.8.197:30300
            icon: grafana.svg
        - Uptime Kuma:
            description: Status Monitoring
            href: http://192.168.8.197:30301
            icon: uptime-kuma.svg
        - Prometheus:
            description: Metrics Collection
            href: https://holm.chat/prometheus
            icon: prometheus.svg
        - Kube Sentinel:
            description: Error Prioritization
            href: https://holm.chat/kube-sentinel
            icon: mdi-shield-alert
        - Health Aggregator:
            description: Health Dashboard
            href: http://192.168.8.197:30667
            icon: mdi-heart-pulse
        - Metrics Dashboard:
            description: Custom Metrics
            href: http://192.168.8.197:30950
            icon: mdi-chart-line
      - Applications:
        - Immich:
            description: Photo Management
            href: http://192.168.8.197:30283
            icon: immich.svg
        - Vaultwarden:
            description: Password Manager
            href: http://192.168.8.197:30880
            icon: vaultwarden.svg
        - Odoo:
            description: ERP & CRM
            href: http://192.168.8.197:30069
            icon: odoo.svg
        - SearXNG:
            description: Privacy Search Engine
            href: https://search.holm.chat
            icon: searxng.svg
        - Grocy:
            description: Household Management
            href: http://192.168.8.197:30881
            icon: grocy.svg
        - Element UI:
            description: Matrix Chat
            href: http://192.168.8.197:30369
            icon: element.svg
        - BookForge:
            description: Book Management
            href: http://192.168.8.197:30808
            icon: mdi-book-open-variant
      - Media:
        - Jellyfin:
            description: Media Server
            href: http://192.168.8.197:30096
            icon: jellyfin.svg
        - TubeArchivist:
            description: YouTube Archive
            href: http://192.168.8.197:30850
            icon: tube-archivist.svg
        - YT Archive:
            description: YouTube Archiver
            href: http://192.168.8.197:30580
            icon: youtube.svg
        - TikTok Archive:
            description: TikTok Archiver
            href: http://192.168.8.197:30888
            icon: tiktok.svg
        - YouTube DL:
            description: Video Downloader
            href: http://192.168.8.197:30089
            icon: youtube.svg
        - Audiobook Web:
            description: Audiobook Library
            href: http://192.168.8.197:30700
            icon: mdi-book-music
      - Holm Apps:
        - HolmOS Shell:
            description: System Shell
            href: http://192.168.8.197:30000
            icon: mdi-console
        - iOS Shell:
            description: iOS Interface
            href: http://192.168.8.197:30001
            icon: mdi-apple
        - Nova:
            description: Nova Platform
            href: http://192.168.8.197:30004
            icon: mdi-star
        - Chat Hub:
            description: Communication Hub
            href: http://192.168.8.197:30003
            icon: mdi-chat
        - Pulse:
            description: Activity Monitor
            href: http://192.168.8.197:30006
            icon: mdi-pulse
        - Settings:
            description: System Settings
            href: http://192.168.8.197:30600
            icon: mdi-cog
        - File Manager:
            description: File Browser
            href: http://192.168.8.197:30088
            icon: mdi-folder
        - Terminal:
            description: Web Terminal
            href: http://192.168.8.197:30800
            icon: mdi-console-line
        - Vault:
            description: Secrets Manager
            href: http://192.168.8.197:30870
            icon: mdi-shield-lock
        - Cluster Manager:
            description: K8s Management
            href: http://192.168.8.197:30502
            icon: kubernetes.svg
      - Development:
        - CICD Controller:
            description: Build Controller
            href: http://192.168.8.197:30020
            icon: mdi-rocket-launch
        - Holm Git:
            description: Git Server
            href: http://192.168.8.197:30009
            icon: git.svg
        - App Store AI:
            description: AI App Store
            href: http://192.168.8.197:30002
            icon: mdi-store
        - Claude Pod:
            description: Claude AI
            href: http://192.168.8.197:30013
            icon: si-anthropic
        - Scribe:
            description: Documentation
            href: http://192.168.8.197:30017
            icon: mdi-typewriter
        - LiveKit:
            description: Real-time Media
            href: http://192.168.8.197:30780
            icon: mdi-video
        - Ollama:
            description: Local LLM
            href: http://192.168.8.197:31434
            icon: ollama.svg
    settings.yaml: |
      color: slate
      headerStyle: clean
      layout:
      - Infrastructure:
          columns: 4
          style: row
      - Monitoring:
          columns: 4
          style: row
      - Applications:
          columns: 5
          style: row
      - Media:
          columns: 4
          style: row
      - Holm Apps:
          columns: 5
          style: row
      - Development:
          columns: 4
          style: row
      theme: dark
      title: Holm.chat
    widgets.yaml: |
      - search:
          provider: custom
          showSearchSuggestions: false
          target: _blank
          url: https://search.holm.chat/search?q=
      - kubernetes:
          cluster:
            cpu: true
            label: Holm Cluster
            memory: true
            show: true
            showLabel: true
          nodes:
            show: false
      - datetime:
          format:
            dateStyle: long
            timeStyle: short
          text_size: l
  kind: ConfigMap
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","data":{"bookmarks.yaml":"","docker.yaml":"","kubernetes.yaml":"mode: cluster\n","services.yaml":"- Infrastructure:\n  - ArgoCD:\n      description: GitOps CD\n      href: http://192.168.8.197:30443\n      icon: argocd.svg\n  - Keycloak:\n      description: Identity Management\n      href: http://192.168.8.197:30080\n      icon: keycloak.svg\n  - KubeView:\n      description: Cluster Visualization\n      href: https://holm.chat/kubeview\n      icon: kubernetes.svg\n  - Pi-hole:\n      description: Network Ad Blocker\n      href: http://192.168.8.209:80\n      icon: pi-hole.svg\n  - Tekton:\n      description: CI/CD Pipelines\n      href: http://192.168.8.197:30097\n      icon: tekton.svg\n  - Registry UI:\n      description: Container Registry\n      href: http://192.168.8.197:31750\n      icon: docker.svg\n- Monitoring:\n  - Grafana:\n      description: Metrics Dashboard\n      href: http://192.168.8.197:30300\n      icon: grafana.svg\n  - Uptime Kuma:\n      description: Status Monitoring\n      href: http://192.168.8.197:30301\n      icon: uptime-kuma.svg\n  - Prometheus:\n      description: Metrics Collection\n      href: https://holm.chat/prometheus\n      icon: prometheus.svg\n  - Kube Sentinel:\n      description: Error Prioritization\n      href: https://holm.chat/kube-sentinel\n      icon: mdi-shield-alert\n  - Health Aggregator:\n      description: Health Dashboard\n      href: http://192.168.8.197:30667\n      icon: mdi-heart-pulse\n  - Metrics Dashboard:\n      description: Custom Metrics\n      href: http://192.168.8.197:30950\n      icon: mdi-chart-line\n- Applications:\n  - Immich:\n      description: Photo Management\n      href: http://192.168.8.197:30283\n      icon: immich.svg\n  - Vaultwarden:\n      description: Password Manager\n      href: http://192.168.8.197:30880\n      icon: vaultwarden.svg\n  - Odoo:\n      description: ERP \u0026 CRM\n      href: http://192.168.8.197:30069\n      icon: odoo.svg\n  - SearXNG:\n      description: Privacy Search Engine\n      href: https://search.holm.chat\n      icon: searxng.svg\n  - Grocy:\n      description: Household Management\n      href: http://192.168.8.197:30881\n      icon: grocy.svg\n  - Element UI:\n      description: Matrix Chat\n      href: http://192.168.8.197:30369\n      icon: element.svg\n  - BookForge:\n      description: Book Management\n      href: http://192.168.8.197:30808\n      icon: mdi-book-open-variant\n- Media:\n  - Jellyfin:\n      description: Media Server\n      href: http://192.168.8.197:30096\n      icon: jellyfin.svg\n  - TubeArchivist:\n      description: YouTube Archive\n      href: http://192.168.8.197:30850\n      icon: tube-archivist.svg\n  - YT Archive:\n      description: YouTube Archiver\n      href: http://192.168.8.197:30580\n      icon: youtube.svg\n  - TikTok Archive:\n      description: TikTok Archiver\n      href: http://192.168.8.197:30888\n      icon: tiktok.svg\n  - YouTube DL:\n      description: Video Downloader\n      href: http://192.168.8.197:30089\n      icon: youtube.svg\n  - Audiobook Web:\n      description: Audiobook Library\n      href: http://192.168.8.197:30700\n      icon: mdi-book-music\n- Holm Apps:\n  - HolmOS Shell:\n      description: System Shell\n      href: http://192.168.8.197:30000\n      icon: mdi-console\n  - iOS Shell:\n      description: iOS Interface\n      href: http://192.168.8.197:30001\n      icon: mdi-apple\n  - Nova:\n      description: Nova Platform\n      href: http://192.168.8.197:30004\n      icon: mdi-star\n  - Chat Hub:\n      description: Communication Hub\n      href: http://192.168.8.197:30003\n      icon: mdi-chat\n  - Pulse:\n      description: Activity Monitor\n      href: http://192.168.8.197:30006\n      icon: mdi-pulse\n  - Settings:\n      description: System Settings\n      href: http://192.168.8.197:30600\n      icon: mdi-cog\n  - File Manager:\n      description: File Browser\n      href: http://192.168.8.197:30088\n      icon: mdi-folder\n  - Terminal:\n      description: Web Terminal\n      href: http://192.168.8.197:30800\n      icon: mdi-console-line\n  - Vault:\n      description: Secrets Manager\n      href: http://192.168.8.197:30870\n      icon: mdi-shield-lock\n  - Cluster Manager:\n      description: K8s Management\n      href: http://192.168.8.197:30502\n      icon: kubernetes.svg\n- Development:\n  - CICD Controller:\n      description: Build Controller\n      href: http://192.168.8.197:30020\n      icon: mdi-rocket-launch\n  - Holm Git:\n      description: Git Server\n      href: http://192.168.8.197:30009\n      icon: git.svg\n  - App Store AI:\n      description: AI App Store\n      href: http://192.168.8.197:30002\n      icon: mdi-store\n  - Claude Pod:\n      description: Claude AI\n      href: http://192.168.8.197:30013\n      icon: si-anthropic\n  - Scribe:\n      description: Documentation\n      href: http://192.168.8.197:30017\n      icon: mdi-typewriter\n  - LiveKit:\n      description: Real-time Media\n      href: http://192.168.8.197:30780\n      icon: mdi-video\n  - Ollama:\n      description: Local LLM\n      href: http://192.168.8.197:31434\n      icon: ollama.svg\n","settings.yaml":"color: slate\nheaderStyle: clean\nlayout:\n- Infrastructure:\n    columns: 4\n    style: row\n- Monitoring:\n    columns: 4\n    style: row\n- Applications:\n    columns: 5\n    style: row\n- Media:\n    columns: 4\n    style: row\n- Holm Apps:\n    columns: 5\n    style: row\n- Development:\n    columns: 4\n    style: row\ntheme: dark\ntitle: Holm.chat\n","widgets.yaml":"- search:\n    provider: custom\n    showSearchSuggestions: false\n    target: _blank\n    url: https://search.holm.chat/search?q=\n- kubernetes:\n    cluster:\n      cpu: true\n      label: Holm Cluster\n      memory: true\n      show: true\n      showLabel: true\n    nodes:\n      show: false\n- datetime:\n    format:\n      dateStyle: long\n      timeStyle: short\n    text_size: l\n"},"kind":"ConfigMap","metadata":{"annotations":{},"labels":{"app.kubernetes.io/instance":"homepage","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"homepage","app.kubernetes.io/version":"v1.2.0","helm.sh/chart":"homepage-2.1.0"},"name":"homepage","namespace":"homepage"}}
    creationTimestamp: "2026-01-20T02:17:50Z"
    labels:
      app.kubernetes.io/instance: homepage
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: homepage
      app.kubernetes.io/version: v1.2.0
      helm.sh/chart: homepage-2.1.0
    name: homepage
    namespace: homepage
    resourceVersion: "36911"
    uid: b6770462-2fa2-4277-b851-e62593833298
- apiVersion: v1
  data:
    Dockerfile: |
      FROM golang:1.22-alpine AS builder

      WORKDIR /app

      # Copy all source files
      COPY . .

      # Download dependencies and build
      RUN go mod download || true
      RUN CGO_ENABLED=0 GOOS=linux go build -o homepage-discovery .

      # Runtime image - use scratch for minimal image, no packages needed
      FROM scratch

      COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/
      COPY --from=builder /app/homepage-discovery /homepage-discovery

      USER 65534:65534

      ENTRYPOINT ["/homepage-discovery"]
    go.mod: "module github.com/timholm/homepage-discovery\n\ngo 1.22\n\nrequire (\n\tgopkg.in/yaml.v3
      v3.0.1\n\tk8s.io/api v0.29.0\n\tk8s.io/apimachinery v0.29.0\n\tk8s.io/client-go
      v0.29.0\n)\n\nrequire (\n\tgithub.com/davecgh/go-spew v1.1.1 // indirect\n\tgithub.com/emicklei/go-restful/v3
      v3.11.0 // indirect\n\tgithub.com/go-logr/logr v1.3.0 // indirect\n\tgithub.com/go-openapi/jsonpointer
      v0.19.6 // indirect\n\tgithub.com/go-openapi/jsonreference v0.20.2 // indirect\n\tgithub.com/go-openapi/swag
      v0.22.3 // indirect\n\tgithub.com/gogo/protobuf v1.3.2 // indirect\n\tgithub.com/golang/protobuf
      v1.5.3 // indirect\n\tgithub.com/google/gnostic-models v0.6.8 // indirect\n\tgithub.com/google/go-cmp
      v0.6.0 // indirect\n\tgithub.com/google/gofuzz v1.2.0 // indirect\n\tgithub.com/google/uuid
      v1.3.0 // indirect\n\tgithub.com/imdario/mergo v0.3.6 // indirect\n\tgithub.com/josharian/intern
      v1.0.0 // indirect\n\tgithub.com/json-iterator/go v1.1.12 // indirect\n\tgithub.com/mailru/easyjson
      v0.7.7 // indirect\n\tgithub.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
      // indirect\n\tgithub.com/modern-go/reflect2 v1.0.2 // indirect\n\tgithub.com/munnerz/goautoneg
      v0.0.0-20191010083416-a7dc8b61c822 // indirect\n\tgithub.com/spf13/pflag v1.0.5
      // indirect\n\tgolang.org/x/net v0.17.0 // indirect\n\tgolang.org/x/oauth2 v0.10.0
      // indirect\n\tgolang.org/x/sys v0.13.0 // indirect\n\tgolang.org/x/term v0.13.0
      // indirect\n\tgolang.org/x/text v0.13.0 // indirect\n\tgolang.org/x/time v0.3.0
      // indirect\n\tgoogle.golang.org/appengine v1.6.7 // indirect\n\tgoogle.golang.org/protobuf
      v1.31.0 // indirect\n\tgopkg.in/inf.v0 v0.9.1 // indirect\n\tgopkg.in/yaml.v2
      v2.4.0 // indirect\n\tk8s.io/klog/v2 v2.110.1 // indirect\n\tk8s.io/kube-openapi
      v0.0.0-20231010175941-2dd684a91f00 // indirect\n\tk8s.io/utils v0.0.0-20230726121419-3b25d923346b
      // indirect\n\tsigs.k8s.io/json v0.0.0-20221116044647-bc3834ca7abd // indirect\n\tsigs.k8s.io/structured-merge-diff/v4
      v4.4.1 // indirect\n\tsigs.k8s.io/yaml v1.3.0 // indirect\n)\n"
    go.sum: |
      github.com/creack/pty v1.1.9/go.mod h1:oKZEueFk5CKHvIhNR5MUki03XCEU+Q6VDXinZuGJ33E=
      github.com/davecgh/go-spew v1.1.0/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=
      github.com/davecgh/go-spew v1.1.1 h1:vj9j/u1bqnvCEfJOwUhtlOARqs3+rkHYY13jYWTU97c=
      github.com/davecgh/go-spew v1.1.1/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=
      github.com/emicklei/go-restful/v3 v3.11.0 h1:rAQeMHw1c7zTmncogyy8VvRZwtkmkZ4FxERmMY4rD+g=
      github.com/emicklei/go-restful/v3 v3.11.0/go.mod h1:6n3XBCmQQb25CM2LCACGz8ukIrRry+4bhvbpWn3mrbc=
      github.com/go-logr/logr v1.3.0 h1:2y3SDp0ZXuc6/cjLSZ+Q3ir+QB9T/iG5yYRXqsagWSY=
      github.com/go-logr/logr v1.3.0/go.mod h1:9T104GzyrTigFIr8wt5mBrctHMim0Nb2HLGrmQ40KvY=
      github.com/go-openapi/jsonpointer v0.19.6 h1:eCs3fxoIi3Wh6vtgmLTOjdhSpiqphQ+DaPn38N2ZdrE=
      github.com/go-openapi/jsonpointer v0.19.6/go.mod h1:osyAmYz/mB/C3I+WsTTSgw1ONzaLJoLCyoi6/zppojs=
      github.com/go-openapi/jsonreference v0.20.2 h1:3sVjiK66+uXK/6oQ8xgcRKcFgQ5KXa2KvnJRumpMGbE=
      github.com/go-openapi/jsonreference v0.20.2/go.mod h1:Bl1zwGIM8/wsvqjsOQLJ/SH+En5Ap4rVB5KVcIDZG2k=
      github.com/go-openapi/swag v0.22.3 h1:yMBqmnQ0gyZvEb/+KzuWZOXgllrXT4SADYbvDaXHv/g=
      github.com/go-openapi/swag v0.22.3/go.mod h1:UzaqsxGiab7freDnrUUra0MwWfN/q7tE4j+VcZ0yl14=
      github.com/go-task/slim-sprig v0.0.0-20230315185526-52ccab3ef572 h1:tfuBGBXKqDEevZMzYi5KSi8KkcZtzBcTgAUUtapy0OI=
      github.com/go-task/slim-sprig v0.0.0-20230315185526-52ccab3ef572/go.mod h1:9Pwr4B2jHnOSGXyyzV8ROjYa2ojvAY6HCGYYfMoC3Ls=
      github.com/gogo/protobuf v1.3.2 h1:Ov1cvc58UF3b5XjBnZv7+opcTcQFZebYjWzi34vdm4Q=
      github.com/gogo/protobuf v1.3.2/go.mod h1:P1XiOD3dCwIKUDQYPy72D8LYyHL2YPYrpS2s69NZV8Q=
      github.com/golang/protobuf v1.3.1/go.mod h1:6lQm79b+lXiMfvg/cZm0SGofjICqVBUtrP5yJMmIC1U=
      github.com/golang/protobuf v1.5.0/go.mod h1:FsONVRAS9T7sI+LIUmWTfcYkHO4aIWwzhcaSAoJOfIk=
      github.com/golang/protobuf v1.5.3 h1:KhyjKVUg7Usr/dYsdSqoFveMYd5ko72D+zANwlG1mmg=
      github.com/golang/protobuf v1.5.3/go.mod h1:XVQd3VNwM+JqD3oG2Ue2ip4fOMUkwXdXDdiuN0vRsmY=
      github.com/google/gnostic-models v0.6.8 h1:yo/ABAfM5IMRsS1VnXjTBvUb61tFIHozhlYvRgGre9I=
      github.com/google/gnostic-models v0.6.8/go.mod h1:5n7qKqH0f5wFt+aWF8CW6pZLLNOfYuF5OpfBSENuI8U=
      github.com/google/go-cmp v0.5.5/go.mod h1:v8dTdLbMG2kIc/vJvl+f65V22dbkXbowE6jgT/gNBxE=
      github.com/google/go-cmp v0.5.9/go.mod h1:17dUlkBOakJ0+DkrSSNjCkIjxS6bF9zb3elmeNGIjoY=
      github.com/google/go-cmp v0.6.0 h1:ofyhxvXcZhMsU5ulbFiLKl/XBFqE1GSq7atu8tAmTRI=
      github.com/google/go-cmp v0.6.0/go.mod h1:17dUlkBOakJ0+DkrSSNjCkIjxS6bF9zb3elmeNGIjoY=
      github.com/google/gofuzz v1.0.0/go.mod h1:dBl0BpW6vV/+mYPU4Po3pmUjxk6FQPldtuIdl/M65Eg=
      github.com/google/gofuzz v1.2.0 h1:xRy4A+RhZaiKjJ1bPfwQ8sedCA+YS2YcCHW6ec7JMi0=
      github.com/google/gofuzz v1.2.0/go.mod h1:dBl0BpW6vV/+mYPU4Po3pmUjxk6FQPldtuIdl/M65Eg=
      github.com/google/pprof v0.0.0-20210720184732-4bb14d4b1be1 h1:K6RDEckDVWvDI9JAJYCmNdQXq6neHJOYx3V6jnqNEec=
      github.com/google/pprof v0.0.0-20210720184732-4bb14d4b1be1/go.mod h1:kpwsk12EmLew5upagYY7GY0pfYCcupk39gWOCRROcvE=
      github.com/google/uuid v1.3.0 h1:t6JiXgmwXMjEs8VusXIJk2BXHsn+wx8BZdTaoZ5fu7I=
      github.com/google/uuid v1.3.0/go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw/LqOeaOT+nhxU+yHo=
      github.com/imdario/mergo v0.3.6 h1:xTNEAn+kxVO7dTZGu0CegyqKZmoWFI0rF8UxjlB2d28=
      github.com/imdario/mergo v0.3.6/go.mod h1:2EnlNZ0deacrJVfApfmtdGgDfMuh/nq6Ok1EcJh5FfA=
      github.com/josharian/intern v1.0.0 h1:vlS4z54oSdjm0bgjRigI+G1HpF+tI+9rE5LLzOg8HmY=
      github.com/josharian/intern v1.0.0/go.mod h1:5DoeVV0s6jJacbCEi61lwdGj/aVlrQvzHFFd8Hwg//Y=
      github.com/json-iterator/go v1.1.12 h1:PV8peI4a0ysnczrg+LtxykD8LfKY9ML6u2jnxaEnrnM=
      github.com/json-iterator/go v1.1.12/go.mod h1:e30LSqwooZae/UwlEbR2852Gd8hjQvJoHmT4TnhNGBo=
      github.com/kisielk/errcheck v1.5.0/go.mod h1:pFxgyoBC7bSaBwPgfKdkLd5X25qrDl4LWUI2bnpBCr8=
      github.com/kisielk/gotool v1.0.0/go.mod h1:XhKaO+MFFWcvkIS/tQcRk01m1F5IRFswLeQ+oQHNcck=
      github.com/kr/pretty v0.2.1/go.mod h1:ipq/a2n7PKx3OHsz4KJII5eveXtPO4qwEXGdVfWzfnI=
      github.com/kr/pretty v0.3.1 h1:flRD4NNwYAUpkphVc1HcthR4KEIFJ65n8Mw5qdRn3LE=
      github.com/kr/pretty v0.3.1/go.mod h1:hoEshYVHaxMs3cyo3Yncou5ZscifuDolrwPKZanG3xk=
      github.com/kr/pty v1.1.1/go.mod h1:pFQYn66WHrOpPYNljwOMqo10TkYh1fy3cYio2l3bCsQ=
      github.com/kr/text v0.1.0/go.mod h1:4Jbv+DJW3UT/LiOwJeYQe1efqtUx/iVham/4vfdArNI=
      github.com/kr/text v0.2.0 h1:5Nx0Ya0ZqY2ygV366QzturHI13Jq95ApcVaJBhpS+AY=
      github.com/kr/text v0.2.0/go.mod h1:eLer722TekiGuMkidMxC/pM04lWEeraHUUmBw8l2grE=
      github.com/mailru/easyjson v0.7.7 h1:UGYAvKxe3sBsEDzO8ZeWOSlIQfWFlxbzLZe7hwFURr0=
      github.com/mailru/easyjson v0.7.7/go.mod h1:xzfreul335JAWq5oZzymOObrkdz5UnU4kGfJJLY9Nlc=
      github.com/modern-go/concurrent v0.0.0-20180228061459-e0a39a4cb421/go.mod h1:6dJC0mAP4ikYIbvyc7fijjWJddQyLn8Ig3JB5CqoB9Q=
      github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd h1:TRLaZ9cD/w8PVh93nsPXa1VrQ6jlwL5oN8l14QlcNfg=
      github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd/go.mod h1:6dJC0mAP4ikYIbvyc7fijjWJddQyLn8Ig3JB5CqoB9Q=
      github.com/modern-go/reflect2 v1.0.2 h1:xBagoLtFs94CBntxluKeaWgTMpvLxC4ur3nMaC9Gz0M=
      github.com/modern-go/reflect2 v1.0.2/go.mod h1:yWuevngMOJpCy52FWWMvUC8ws7m/LJsjYzDa0/r8luk=
      github.com/munnerz/goautoneg v0.0.0-20191010083416-a7dc8b61c822 h1:C3w9PqII01/Oq1c1nUAm88MOHcQC9l5mIlSMApZMrHA=
      github.com/munnerz/goautoneg v0.0.0-20191010083416-a7dc8b61c822/go.mod h1:+n7T8mK8HuQTcFwEeznm/DIxMOiR9yIdICNftLE1DvQ=
      github.com/onsi/ginkgo/v2 v2.13.0 h1:0jY9lJquiL8fcf3M4LAXN5aMlS/b2BV86HFFPCPMgE4=
      github.com/onsi/ginkgo/v2 v2.13.0/go.mod h1:TE309ZR8s5FsKKpuB1YAQYBzCaAfUgatB/xlT/ETL/o=
      github.com/onsi/gomega v1.29.0 h1:KIA/t2t5UBzoirT4H9tsML45GEbo3ouUnBHsCfD2tVg=
      github.com/onsi/gomega v1.29.0/go.mod h1:9sxs+SwGrKI0+PWe4Fxa9tFQQBG5xSsSbMXOI8PPpoQ=
      github.com/pmezard/go-difflib v1.0.0 h1:4DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk/f1lZbAQM=
      github.com/pmezard/go-difflib v1.0.0/go.mod h1:iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ/4=
      github.com/rogpeppe/go-internal v1.10.0 h1:TMyTOH3F/DB16zRVcYyreMH6GnZZrwQVAoYjRBZyWFQ=
      github.com/rogpeppe/go-internal v1.10.0/go.mod h1:UQnix2H7Ngw/k4C5ijL5+65zddjncjaFoBhdsK/akog=
      github.com/spf13/pflag v1.0.5 h1:iy+VFUOCP1a+8yFto/drg2CJ5u0yRoB7fZw3DKv/JXA=
      github.com/spf13/pflag v1.0.5/go.mod h1:McXfInJRrz4CZXVZOBLb0bTZqETkiAhM9Iw0y3An2Bg=
      github.com/stretchr/objx v0.1.0/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=
      github.com/stretchr/objx v0.4.0/go.mod h1:YvHI0jy2hoMjB+UWwv71VJQ9isScKT/TqJzVSSt89Yw=
      github.com/stretchr/objx v0.5.0/go.mod h1:Yh+to48EsGEfYuaHDzXPcE3xhTkx73EhmCGUpEOglKo=
      github.com/stretchr/testify v1.3.0/go.mod h1:M5WIy9Dh21IEIfnGCwXGc5bZfKNJtfHm1UVUgZn+9EI=
      github.com/stretchr/testify v1.7.1/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=
      github.com/stretchr/testify v1.8.0/go.mod h1:yNjHg4UonilssWZ8iaSj1OCr/vHnekPRkoO+kdMU+MU=
      github.com/stretchr/testify v1.8.1/go.mod h1:w2LPCIKwWwSfY2zedu0+kehJoqGctiVI29o6fzry7u4=
      github.com/stretchr/testify v1.8.4 h1:CcVxjf3Q8PM0mHUKJCdn+eZZtm5yQwehR5yeSVQQcUk=
      github.com/stretchr/testify v1.8.4/go.mod h1:sz/lmYIOXD/1dqDmKjjqLyZ2RngseejIcXlSw2iwfAo=
      github.com/yuin/goldmark v1.1.27/go.mod h1:3hX8gzYuyVAZsxl0MRgGTJEmQBFcNTphYh9decYSb74=
      github.com/yuin/goldmark v1.2.1/go.mod h1:3hX8gzYuyVAZsxl0MRgGTJEmQBFcNTphYh9decYSb74=
      golang.org/x/crypto v0.0.0-20190308221718-c2843e01d9a2/go.mod h1:djNgcEr1/C05ACkg1iLfiJU5Ep61QUkGW8qpdssI0+w=
      golang.org/x/crypto v0.0.0-20191011191535-87dc89f01550/go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=
      golang.org/x/crypto v0.0.0-20200622213623-75b288015ac9/go.mod h1:LzIPMQfyMNhhGPhUkYOs5KpL4U8rLKemX1yGLhDgUto=
      golang.org/x/mod v0.2.0/go.mod h1:s0Qsj1ACt9ePp/hMypM3fl4fZqREWJwdYDEqhRiZZUA=
      golang.org/x/mod v0.3.0/go.mod h1:s0Qsj1ACt9ePp/hMypM3fl4fZqREWJwdYDEqhRiZZUA=
      golang.org/x/net v0.0.0-20190404232315-eb5bcb51f2a3/go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=
      golang.org/x/net v0.0.0-20190603091049-60506f45cf65/go.mod h1:HSz+uSET+XFnRR8LxR5pz3Of3rY3CfYBVs4xY44aLks=
      golang.org/x/net v0.0.0-20190620200207-3b0461eec859/go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4/5GtJWs/s=
      golang.org/x/net v0.0.0-20200226121028-0de0cce0169b/go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4/5GtJWs/s=
      golang.org/x/net v0.0.0-20201021035429-f5854403a974/go.mod h1:sp8m0HH+o8qH0wwXwYZr8TS3Oi6o0r6Gce1SSxlDquU=
      golang.org/x/net v0.17.0 h1:pVaXccu2ozPjCXewfr1S7xza/zcXTity9cCdXQYSjIM=
      golang.org/x/net v0.17.0/go.mod h1:NxSsAGuq816PNPmqtQdLE42eU2Fs7NoRIZrHJAlaCOE=
      golang.org/x/oauth2 v0.10.0 h1:zHCpF2Khkwy4mMB4bv0U37YtJdTGW8jI0glAApi0Kh8=
      golang.org/x/oauth2 v0.10.0/go.mod h1:kTpgurOux7LqtuxjuyZa4Gj2gdezIt/jQtGnNFfypQI=
      golang.org/x/sync v0.0.0-20190423024810-112230192c58/go.mod h1:RxMgew5VJxzue5/jJTE5uejpjVlOe/izrB70Jof72aM=
      golang.org/x/sync v0.0.0-20190911185100-cd5d95a43a6e/go.mod h1:RxMgew5VJxzue5/jJTE5uejpjVlOe/izrB70Jof72aM=
      golang.org/x/sync v0.0.0-20201020160332-67f06af15bc9/go.mod h1:RxMgew5VJxzue5/jJTE5uejpjVlOe/izrB70Jof72aM=
      golang.org/x/sys v0.0.0-20190215142949-d0b11bdaac8a/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
      golang.org/x/sys v0.0.0-20190412213103-97732733099d/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
      golang.org/x/sys v0.0.0-20200930185726-fdedc70b468f/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
      golang.org/x/sys v0.13.0 h1:Af8nKPmuFypiUBjVoU9V20FiaFXOcuZI21p0ycVYYGE=
      golang.org/x/sys v0.13.0/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
      golang.org/x/term v0.13.0 h1:bb+I9cTfFazGW51MZqBVmZy7+JEJMouUHTUSKVQLBek=
      golang.org/x/term v0.13.0/go.mod h1:LTmsnFJwVN6bCy1rVCoS+qHT1HhALEFxKncY3WNNh4U=
      golang.org/x/text v0.3.0/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=
      golang.org/x/text v0.3.2/go.mod h1:bEr9sfX3Q8Zfm5fL9x+3itogRgK3+ptLWKqgva+5dAk=
      golang.org/x/text v0.3.3/go.mod h1:5Zoc/QRtKVWzQhOtBMvqHzDpF6irO9z98xDceosuGiQ=
      golang.org/x/text v0.13.0 h1:ablQoSUd0tRdKxZewP80B+BaqeKJuVhuRxj/dkrun3k=
      golang.org/x/text v0.13.0/go.mod h1:TvPlkZtksWOMsz7fbANvkp4WM8x/WCo/om8BMLbz+aE=
      golang.org/x/time v0.3.0 h1:rg5rLMjNzMS1RkNLzCG38eapWhnYLFYXDXj2gOlr8j4=
      golang.org/x/time v0.3.0/go.mod h1:tRJNPiyCQ0inRvYxbN9jk5I+vvW/OXSQhTDSoE431IQ=
      golang.org/x/tools v0.0.0-20180917221912-90fa682c2a6e/go.mod h1:n7NCudcB/nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=
      golang.org/x/tools v0.0.0-20191119224855-298f0cb1881e/go.mod h1:b+2E5dAYhXwXZwtnZ6UAqBI28+e2cm9otk0dWdXHAEo=
      golang.org/x/tools v0.0.0-20200619180055-7c47624df98f/go.mod h1:EkVYQZoAsY45+roYkvgYkIh4xh/qjgUK9TdY2XT94GE=
      golang.org/x/tools v0.0.0-20210106214847-113979e3529a/go.mod h1:emZCQorbCU4vsT4fOWvOPXz4eW1wZW4PmDk9uLelYpA=
      golang.org/x/tools v0.12.0 h1:YW6HUoUmYBpwSgyaGaZq1fHjrBjX1rlpZ54T6mu2kss=
      golang.org/x/tools v0.12.0/go.mod h1:Sc0INKfu04TlqNoRA1hgpFZbhYXHPr4V5DzpSBTPqQM=
      golang.org/x/xerrors v0.0.0-20190717185122-a985d3407aa7/go.mod h1:I/5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
      golang.org/x/xerrors v0.0.0-20191011141410-1b5146add898/go.mod h1:I/5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
      golang.org/x/xerrors v0.0.0-20191204190536-9bdfabe68543/go.mod h1:I/5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
      golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1/go.mod h1:I/5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
      google.golang.org/appengine v1.6.7 h1:FZR1q0exgwxzPzp/aF+VccGrSfxfPpkBqjIIEq3ru6c=
      google.golang.org/appengine v1.6.7/go.mod h1:8WjMMxjGQR8xUklV/ARdw2HLXBOI7O7uCIDZVag1xfc=
      google.golang.org/protobuf v1.26.0-rc.1/go.mod h1:jlhhOSvTdKEhbULTjvd4ARK9grFBp09yW+WbY/TyQbw=
      google.golang.org/protobuf v1.26.0/go.mod h1:9q0QmTI4eRPtz6boOQmLYwt+qCgq0jsYwAQnmE0givc=
      google.golang.org/protobuf v1.31.0 h1:g0LDEJHgrBl9N9r17Ru3sqWhkIx2NB67okBHPwC7hs8=
      google.golang.org/protobuf v1.31.0/go.mod h1:HV8QOd/L58Z+nl8r43ehVNZIU/HEI6OcFqwMG9pJV4I=
      gopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=
      gopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c h1:Hei/4ADfdWqJk1ZMxUNpqntNwaWcugrBjAiHlqqRiVk=
      gopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c/go.mod h1:JHkPIbrfpd72SG/EVd6muEfDQjcINNoR0C8j2r3qZ4Q=
      gopkg.in/inf.v0 v0.9.1 h1:73M5CoZyi3ZLMOyDlQh031Cx6N9NDJ2Vvfl76EDAgDc=
      gopkg.in/inf.v0 v0.9.1/go.mod h1:cWUDdTG/fYaXco+Dcufb5Vnc6Gp2YChqWtbxRZE0mXw=
      gopkg.in/yaml.v2 v2.2.8/go.mod h1:hI93XBmqTisBFMUTm0b8Fm+jr3Dg1NNxqwp+5A1VGuI=
      gopkg.in/yaml.v2 v2.4.0 h1:D8xgwECY7CYvx+Y2n4sBz93Jn9JRvxdiyyo8CTfuKaY=
      gopkg.in/yaml.v2 v2.4.0/go.mod h1:RDklbk79AGWmwhnvt/jBztapEOGDOx6ZbXqjP6csGnQ=
      gopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c/go.mod h1:K4uyk7z7BCEPqu6E+C64Yfv1cQ7kz7rIZviUmN+EgEM=
      gopkg.in/yaml.v3 v3.0.1 h1:fxVm/GzAzEWqLHuvctI91KS9hhNmmWOoWu0XTYJS7CA=
      gopkg.in/yaml.v3 v3.0.1/go.mod h1:K4uyk7z7BCEPqu6E+C64Yfv1cQ7kz7rIZviUmN+EgEM=
      k8s.io/api v0.29.0 h1:NiCdQMY1QOp1H8lfRyeEf8eOwV6+0xA6XEE44ohDX2A=
      k8s.io/api v0.29.0/go.mod h1:sdVmXoz2Bo/cb77Pxi71IPTSErEW32xa4aXwKH7gfBA=
      k8s.io/apimachinery v0.29.0 h1:+ACVktwyicPz0oc6MTMLwa2Pw3ouLAfAon1wPLtG48o=
      k8s.io/apimachinery v0.29.0/go.mod h1:eVBxQ/cwiJxH58eK/jd/vAk4mrxmVlnpBH5J2GbMeis=
      k8s.io/client-go v0.29.0 h1:KmlDtFcrdUzOYrBhXHgKw5ycWzc3ryPX5mQe0SkG3y8=
      k8s.io/client-go v0.29.0/go.mod h1:yLkXH4HKMAywcrD82KMSmfYg2DlE8mepPR4JGSo5n38=
      k8s.io/klog/v2 v2.110.1 h1:U/Af64HJf7FcwMcXyKm2RPM22WZzyR7OSpYj5tg3cL0=
      k8s.io/klog/v2 v2.110.1/go.mod h1:YGtd1984u+GgbuZ7e08/yBuAfKLSO0+uR1Fhi6ExXjo=
      k8s.io/kube-openapi v0.0.0-20231010175941-2dd684a91f00 h1:aVUu9fTY98ivBPKR9Y5w/AuzbMm96cd3YHRTU83I780=
      k8s.io/kube-openapi v0.0.0-20231010175941-2dd684a91f00/go.mod h1:AsvuZPBlUDVuCdzJ87iajxtXuR9oktsTctW/R9wwouA=
      k8s.io/utils v0.0.0-20230726121419-3b25d923346b h1:sgn3ZU783SCgtaSJjpcVVlRqd6GSnlTLKgpAAttJvpI=
      k8s.io/utils v0.0.0-20230726121419-3b25d923346b/go.mod h1:OLgZIPagt7ERELqWJFomSt595RzquPNLL48iOWgYOg0=
      sigs.k8s.io/json v0.0.0-20221116044647-bc3834ca7abd h1:EDPBXCAspyGV4jQlpZSudPeMmr1bNJefnuqLsRAsHZo=
      sigs.k8s.io/json v0.0.0-20221116044647-bc3834ca7abd/go.mod h1:B8JuhiUyNFVKdsE8h686QcCxMaH6HrOAZj4vswFpcB0=
      sigs.k8s.io/structured-merge-diff/v4 v4.4.1 h1:150L+0vs/8DA78h1u02ooW1/fFq/Lwr+sGiqlzvrtq4=
      sigs.k8s.io/structured-merge-diff/v4 v4.4.1/go.mod h1:N8hJocpFajUSSeSJ9bOZ77VzejKZaXsTtZo4/u7Io08=
      sigs.k8s.io/yaml v1.3.0 h1:a2VclLzOGrwOHDiV8EfBGhvjHvP46CtW5j6POvhYGGo=
      sigs.k8s.io/yaml v1.3.0/go.mod h1:GeOyir5tyXNByN85N/dRIT9es5UQNerPYEKK56eTBm8=
    main.go: "package main\n\nimport (\n\t\"context\"\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"os\"\n\t\"os/signal\"\n\t\"sort\"\n\t\"syscall\"\n\t\"time\"\n\n\t\"gopkg.in/yaml.v3\"\n\tcorev1
      \"k8s.io/api/core/v1\"\n\tmetav1 \"k8s.io/apimachinery/pkg/apis/meta/v1\"\n\t\"k8s.io/apimachinery/pkg/types\"\n\t\"k8s.io/client-go/informers\"\n\t\"k8s.io/client-go/kubernetes\"\n\t\"k8s.io/client-go/rest\"\n\t\"k8s.io/client-go/tools/cache\"\n\t\"k8s.io/client-go/tools/clientcmd\"\n)\n\nconst
      (\n\tannotationEnabled     = \"gethomepage.dev/enabled\"\n\tannotationName        =
      \"gethomepage.dev/name\"\n\tannotationDescription = \"gethomepage.dev/description\"\n\tannotationGroup
      \      = \"gethomepage.dev/group\"\n\tannotationIcon        = \"gethomepage.dev/icon\"\n\tannotationHref
      \       = \"gethomepage.dev/href\"\n\tannotationWeight      = \"gethomepage.dev/weight\"\n\n\tdefaultGroup
      = \"Discovered\"\n)\n\ntype ServiceEntry struct {\n\tDescription string `yaml:\"description,omitempty\"`\n\tHref
      \       string `yaml:\"href\"`\n\tIcon        string `yaml:\"icon,omitempty\"`\n}\n\ntype
      DiscoveredService struct {\n\tName        string\n\tDescription string\n\tGroup
      \      string\n\tIcon        string\n\tHref        string\n\tWeight      int\n}\n\ntype
      Controller struct {\n\tclientset         *kubernetes.Clientset\n\thomepageNamespace
      string\n\thomepageConfigMap string\n\trestartHomepage   bool\n\tdiscoveredGroups
      \ map[string]bool // Groups managed by this controller\n}\n\nfunc main() {\n\tfmt.Println(\"Homepage
      Discovery Controller starting...\")\n\n\t// Get configuration from environment\n\thomepageNamespace
      := getEnv(\"HOMEPAGE_NAMESPACE\", \"homepage\")\n\thomepageConfigMap := getEnv(\"HOMEPAGE_CONFIGMAP\",
      \"homepage\")\n\trestartHomepage := getEnv(\"RESTART_HOMEPAGE\", \"true\") ==
      \"true\"\n\n\t// Create Kubernetes client\n\tclientset, err := createClient()\n\tif
      err != nil {\n\t\tfmt.Printf(\"Error creating Kubernetes client: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\n\tcontroller
      := &Controller{\n\t\tclientset:         clientset,\n\t\thomepageNamespace: homepageNamespace,\n\t\thomepageConfigMap:
      homepageConfigMap,\n\t\trestartHomepage:   restartHomepage,\n\t\tdiscoveredGroups:
      \ make(map[string]bool),\n\t}\n\n\t// Create informer factory\n\tfactory :=
      informers.NewSharedInformerFactory(clientset, 30*time.Second)\n\tserviceInformer
      := factory.Core().V1().Services().Informer()\n\n\t// Add event handlers\n\tserviceInformer.AddEventHandler(cache.ResourceEventHandlerFuncs{\n\t\tAddFunc:
      func(obj interface{}) {\n\t\t\tcontroller.handleServiceChange()\n\t\t},\n\t\tUpdateFunc:
      func(oldObj, newObj interface{}) {\n\t\t\tcontroller.handleServiceChange()\n\t\t},\n\t\tDeleteFunc:
      func(obj interface{}) {\n\t\t\tcontroller.handleServiceChange()\n\t\t},\n\t})\n\n\t//
      Start informer\n\tctx, cancel := context.WithCancel(context.Background())\n\tdefer
      cancel()\n\n\tgo factory.Start(ctx.Done())\n\n\t// Wait for cache sync\n\tif
      !cache.WaitForCacheSync(ctx.Done(), serviceInformer.HasSynced) {\n\t\tfmt.Println(\"Error
      waiting for cache sync\")\n\t\tos.Exit(1)\n\t}\n\n\tfmt.Println(\"Cache synced,
      controller running...\")\n\n\t// Initial sync\n\tcontroller.handleServiceChange()\n\n\t//
      Wait for shutdown signal\n\tsigCh := make(chan os.Signal, 1)\n\tsignal.Notify(sigCh,
      syscall.SIGINT, syscall.SIGTERM)\n\t<-sigCh\n\n\tfmt.Println(\"Shutting down...\")\n}\n\nfunc
      createClient() (*kubernetes.Clientset, error) {\n\t// Try in-cluster config
      first\n\tconfig, err := rest.InClusterConfig()\n\tif err != nil {\n\t\t// Fall
      back to kubeconfig\n\t\tkubeconfig := os.Getenv(\"KUBECONFIG\")\n\t\tif kubeconfig
      == \"\" {\n\t\t\tkubeconfig = os.Getenv(\"HOME\") + \"/.kube/config\"\n\t\t}\n\t\tconfig,
      err = clientcmd.BuildConfigFromFlags(\"\", kubeconfig)\n\t\tif err != nil {\n\t\t\treturn
      nil, err\n\t\t}\n\t}\n\treturn kubernetes.NewForConfig(config)\n}\n\nfunc getEnv(key,
      defaultValue string) string {\n\tif value := os.Getenv(key); value != \"\" {\n\t\treturn
      value\n\t}\n\treturn defaultValue\n}\n\nfunc (c *Controller) handleServiceChange()
      {\n\tctx := context.Background()\n\n\t// List all services\n\tservices, err
      := c.clientset.CoreV1().Services(\"\").List(ctx, metav1.ListOptions{})\n\tif
      err != nil {\n\t\tfmt.Printf(\"Error listing services: %v\\n\", err)\n\t\treturn\n\t}\n\n\t//
      Collect discovered services\n\tdiscovered := make(map[string][]DiscoveredService)\n\tfor
      _, svc := range services.Items {\n\t\tif svc.Annotations[annotationEnabled]
      != \"true\" {\n\t\t\tcontinue\n\t\t}\n\n\t\tds := DiscoveredService{\n\t\t\tName:
      \       svc.Annotations[annotationName],\n\t\t\tDescription: svc.Annotations[annotationDescription],\n\t\t\tGroup:
      \      svc.Annotations[annotationGroup],\n\t\t\tIcon:        svc.Annotations[annotationIcon],\n\t\t\tHref:
      \       svc.Annotations[annotationHref],\n\t\t}\n\n\t\t// Use service name if
      no name annotation\n\t\tif ds.Name == \"\" {\n\t\t\tds.Name = svc.Name\n\t\t}\n\n\t\t//
      Use default group if not specified\n\t\tif ds.Group == \"\" {\n\t\t\tds.Group
      = defaultGroup\n\t\t}\n\n\t\t// Skip if no href\n\t\tif ds.Href == \"\" {\n\t\t\tfmt.Printf(\"Skipping
      service %s/%s: no href annotation\\n\", svc.Namespace, svc.Name)\n\t\t\tcontinue\n\t\t}\n\n\t\tc.discoveredGroups[ds.Group]
      = true\n\t\tdiscovered[ds.Group] = append(discovered[ds.Group], ds)\n\n\t\tfmt.Printf(\"Discovered
      service: %s (%s) -> %s\\n\", ds.Name, ds.Group, ds.Href)\n\t}\n\n\t// Sort services
      within each group by name\n\tfor group := range discovered {\n\t\tsort.Slice(discovered[group],
      func(i, j int) bool {\n\t\t\treturn discovered[group][i].Name < discovered[group][j].Name\n\t\t})\n\t}\n\n\t//
      Update ConfigMap\n\tif err := c.updateConfigMap(ctx, discovered); err != nil
      {\n\t\tfmt.Printf(\"Error updating ConfigMap: %v\\n\", err)\n\t\treturn\n\t}\n\n\t//
      Restart homepage if configured\n\tif c.restartHomepage {\n\t\tif err := c.restartHomepagePod(ctx);
      err != nil {\n\t\t\tfmt.Printf(\"Error restarting homepage: %v\\n\", err)\n\t\t}\n\t}\n}\n\nfunc
      (c *Controller) updateConfigMap(ctx context.Context, discovered map[string][]DiscoveredService)
      error {\n\t// Get current ConfigMap\n\tcm, err := c.clientset.CoreV1().ConfigMaps(c.homepageNamespace).Get(ctx,
      c.homepageConfigMap, metav1.GetOptions{})\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed
      to get ConfigMap: %w\", err)\n\t}\n\n\t// Parse current services.yaml\n\tservicesYaml
      := cm.Data[\"services.yaml\"]\n\tvar services []map[string][]map[string]ServiceEntry\n\tif
      servicesYaml != \"\" {\n\t\tif err := yaml.Unmarshal([]byte(servicesYaml), &services);
      err != nil {\n\t\t\treturn fmt.Errorf(\"failed to parse services.yaml: %w\",
      err)\n\t\t}\n\t}\n\n\t// Remove previously discovered groups (groups managed
      by this controller)\n\tvar filteredServices []map[string][]map[string]ServiceEntry\n\tfor
      _, groupMap := range services {\n\t\tfor groupName := range groupMap {\n\t\t\tif
      !c.discoveredGroups[groupName] {\n\t\t\t\tfilteredServices = append(filteredServices,
      groupMap)\n\t\t\t}\n\t\t}\n\t}\n\n\t// Add discovered services\n\tfor groupName,
      groupServices := range discovered {\n\t\tgroupEntries := make([]map[string]ServiceEntry,
      0, len(groupServices))\n\t\tfor _, svc := range groupServices {\n\t\t\tentry
      := map[string]ServiceEntry{\n\t\t\t\tsvc.Name: {\n\t\t\t\t\tDescription: svc.Description,\n\t\t\t\t\tHref:
      \       svc.Href,\n\t\t\t\t\tIcon:        svc.Icon,\n\t\t\t\t},\n\t\t\t}\n\t\t\tgroupEntries
      = append(groupEntries, entry)\n\t\t}\n\t\tif len(groupEntries) > 0 {\n\t\t\tfilteredServices
      = append(filteredServices, map[string][]map[string]ServiceEntry{\n\t\t\t\tgroupName:
      groupEntries,\n\t\t\t})\n\t\t}\n\t}\n\n\t// Marshal back to YAML\n\tnewServicesYaml,
      err := yaml.Marshal(filteredServices)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed
      to marshal services.yaml: %w\", err)\n\t}\n\n\t// Check if changed\n\tif string(newServicesYaml)
      == servicesYaml {\n\t\tfmt.Println(\"No changes to services.yaml\")\n\t\treturn
      nil\n\t}\n\n\t// Update ConfigMap\n\tcm.Data[\"services.yaml\"] = string(newServicesYaml)\n\n\t//
      Also update settings.yaml to include discovered groups in layout\n\tif err :=
      c.updateSettingsLayout(cm, discovered); err != nil {\n\t\tfmt.Printf(\"Warning:
      failed to update settings layout: %v\\n\", err)\n\t}\n\n\t_, err = c.clientset.CoreV1().ConfigMaps(c.homepageNamespace).Update(ctx,
      cm, metav1.UpdateOptions{})\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed
      to update ConfigMap: %w\", err)\n\t}\n\n\tfmt.Printf(\"Updated ConfigMap with
      %d groups\\n\", len(discovered))\n\treturn nil\n}\n\nfunc (c *Controller) updateSettingsLayout(cm
      *corev1.ConfigMap, discovered map[string][]DiscoveredService) error {\n\tsettingsYaml
      := cm.Data[\"settings.yaml\"]\n\tif settingsYaml == \"\" {\n\t\treturn nil\n\t}\n\n\tvar
      settings map[string]interface{}\n\tif err := yaml.Unmarshal([]byte(settingsYaml),
      &settings); err != nil {\n\t\treturn err\n\t}\n\n\tlayout, ok := settings[\"layout\"].([]interface{})\n\tif
      !ok {\n\t\treturn nil\n\t}\n\n\t// Check which discovered groups are already
      in layout\n\texistingGroups := make(map[string]bool)\n\tfor _, item := range
      layout {\n\t\tif groupMap, ok := item.(map[string]interface{}); ok {\n\t\t\tfor
      groupName := range groupMap {\n\t\t\t\texistingGroups[groupName] = true\n\t\t\t}\n\t\t}\n\t}\n\n\t//
      Add missing discovered groups to layout\n\tmodified := false\n\tfor groupName
      := range discovered {\n\t\tif !existingGroups[groupName] {\n\t\t\tlayout = append(layout,
      map[string]interface{}{\n\t\t\t\tgroupName: map[string]interface{}{\n\t\t\t\t\t\"style\":
      \  \"row\",\n\t\t\t\t\t\"columns\": 4,\n\t\t\t\t},\n\t\t\t})\n\t\t\tmodified
      = true\n\t\t}\n\t}\n\n\tif modified {\n\t\tsettings[\"layout\"] = layout\n\t\tnewSettingsYaml,
      err := yaml.Marshal(settings)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t\tcm.Data[\"settings.yaml\"]
      = string(newSettingsYaml)\n\t}\n\n\treturn nil\n}\n\nfunc (c *Controller) restartHomepagePod(ctx
      context.Context) error {\n\t// Patch deployment to trigger rollout\n\tpatch
      := map[string]interface{}{\n\t\t\"spec\": map[string]interface{}{\n\t\t\t\"template\":
      map[string]interface{}{\n\t\t\t\t\"metadata\": map[string]interface{}{\n\t\t\t\t\t\"annotations\":
      map[string]interface{}{\n\t\t\t\t\t\t\"homepage-discovery/restartedAt\": time.Now().Format(time.RFC3339),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}\n\n\tpatchBytes,
      err := json.Marshal(patch)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\t_, err
      = c.clientset.AppsV1().Deployments(c.homepageNamespace).Patch(\n\t\tctx,\n\t\t\"homepage\",\n\t\ttypes.StrategicMergePatchType,\n\t\tpatchBytes,\n\t\tmetav1.PatchOptions{},\n\t)\n\n\tif
      err != nil {\n\t\treturn err\n\t}\n\n\tfmt.Println(\"Triggered homepage restart\")\n\treturn
      nil\n}\n"
  kind: ConfigMap
  metadata:
    creationTimestamp: "2026-01-25T01:17:57Z"
    name: homepage-discovery-src
    namespace: homepage
    resourceVersion: "764"
    uid: a7f446a1-c910-4a4e-b70e-45ed1b363d41
- apiVersion: v1
  data:
    services.yaml: |
      - Infrastructure:
        - ArgoCD:
            description: GitOps CD
            href: https://holm.chat/argoCD
            icon: argocd.svg
            siteMonitor: http://argocd-server.argocd.svc.cluster.local:80
        - Argo Workflows:
            description: Workflow Engine
            href: https://holm.chat/argo-workflows
            icon: argo.svg
            siteMonitor: http://argo-workflows-server.argo.svc.cluster.local:2746
        - Keycloak:
            description: Identity Management
            href: https://holm.chat/auth
            icon: keycloak.svg
            siteMonitor: http://keycloak.keycloak.svc.cluster.local:80
        - KubeView:
            description: Cluster Visualization
            href: https://holm.chat/kubeview
            icon: kubernetes.svg
        - Pi-hole:
            description: Network Ad Blocker
            href: https://pihole.holm.chat/admin
            icon: pi-hole.svg
            siteMonitor: http://pihole-web.pihole.svc.cluster.local:80
      - Monitoring:
        - Grafana:
            description: Metrics Dashboard
            href: https://holm.chat/grafana
            icon: grafana.svg
            siteMonitor: http://grafana.monitoring.svc.cluster.local:80
        - Uptime Kuma:
            description: Status Monitoring
            href: https://uptime.holm.chat/status/holm-chat
            icon: uptime-kuma.svg
            siteMonitor: http://192.168.8.105:3001
            widget:
              type: uptimekuma
              url: http://192.168.8.105:3001
              slug: holm-chat
        - Prometheus:
            description: Metrics Collection
            href: https://holm.chat/prometheus
            icon: prometheus.svg
        - Kube Sentinel:
            description: Error Prioritization
            href: https://holm.chat/kube-sentinel
            icon: mdi-shield-alert
            siteMonitor: http://kube-sentinel.kube-sentinel.svc.cluster.local:80
      - Applications:
        - Immich:
            description: Photo Management
            href: https://holm.chat/immich
            icon: immich.svg
        - Claude WebUI:
            description: AI Assistant
            href: https://holm.chat/claude
            icon: si-anthropic
        - SearXNG:
            description: Privacy Search Engine
            href: https://search.holm.chat
            icon: searxng.svg
            siteMonitor: http://searxng.searxng.svc.cluster.local:8080
        - Vaultwarden:
            description: Password Manager
            href: https://vault.holm.chat
            icon: vaultwarden.svg
            siteMonitor: http://vaultwarden.default.svc.cluster.local:80
        - Odoo:
            description: ERP & CRM
            href: https://odoo.holm.chat
            icon: odoo.svg
            siteMonitor: http://odoo.odoo:8069
      - Local Apps:
        - Jellyfin:
            description: Media Server (Local)
            href: http://192.168.8.197:30096
            icon: jellyfin.svg
        - Immich:
            description: Photo Management (Local)
            href: http://192.168.8.197:30283
            icon: immich.svg
        - YT Archive:
            description: YouTube Archiver
            href: http://192.168.8.197:30580
            icon: youtube.svg
        - Grocy:
            description: Household Management
            href: http://192.168.8.197:30881
            icon: grocy.svg
  kind: ConfigMap
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","data":{"services.yaml":"- Infrastructure:\n  - ArgoCD:\n      description: GitOps CD\n      href: https://holm.chat/argoCD\n      icon: argocd.svg\n      siteMonitor: http://argocd-server.argocd.svc.cluster.local:80\n  - Argo Workflows:\n      description: Workflow Engine\n      href: https://holm.chat/argo-workflows\n      icon: argo.svg\n      siteMonitor: http://argo-workflows-server.argo.svc.cluster.local:2746\n  - Keycloak:\n      description: Identity Management\n      href: https://holm.chat/auth\n      icon: keycloak.svg\n      siteMonitor: http://keycloak.keycloak.svc.cluster.local:80\n  - KubeView:\n      description: Cluster Visualization\n      href: https://holm.chat/kubeview\n      icon: kubernetes.svg\n  - Pi-hole:\n      description: Network Ad Blocker\n      href: https://pihole.holm.chat/admin\n      icon: pi-hole.svg\n      siteMonitor: http://pihole-web.pihole.svc.cluster.local:80\n- Monitoring:\n  - Grafana:\n      description: Metrics Dashboard\n      href: https://holm.chat/grafana\n      icon: grafana.svg\n      siteMonitor: http://grafana.monitoring.svc.cluster.local:80\n  - Uptime Kuma:\n      description: Status Monitoring\n      href: https://uptime.holm.chat/status/holm-chat\n      icon: uptime-kuma.svg\n      siteMonitor: http://192.168.8.105:3001\n      widget:\n        type: uptimekuma\n        url: http://192.168.8.105:3001\n        slug: holm-chat\n  - Prometheus:\n      description: Metrics Collection\n      href: https://holm.chat/prometheus\n      icon: prometheus.svg\n  - Kube Sentinel:\n      description: Error Prioritization\n      href: https://holm.chat/kube-sentinel\n      icon: mdi-shield-alert\n      siteMonitor: http://kube-sentinel.kube-sentinel.svc.cluster.local:80\n- Applications:\n  - Immich:\n      description: Photo Management\n      href: https://holm.chat/immich\n      icon: immich.svg\n  - Claude WebUI:\n      description: AI Assistant\n      href: https://holm.chat/claude\n      icon: si-anthropic\n  - SearXNG:\n      description: Privacy Search Engine\n      href: https://search.holm.chat\n      icon: searxng.svg\n      siteMonitor: http://searxng.searxng.svc.cluster.local:8080\n  - Vaultwarden:\n      description: Password Manager\n      href: https://vault.holm.chat\n      icon: vaultwarden.svg\n      siteMonitor: http://vaultwarden.default.svc.cluster.local:80\n  - Odoo:\n      description: ERP \u0026 CRM\n      href: https://odoo.holm.chat\n      icon: odoo.svg\n      siteMonitor: http://odoo.odoo:8069\n- Local Apps:\n  - Jellyfin:\n      description: Media Server (Local)\n      href: http://192.168.8.197:30096\n      icon: jellyfin.svg\n  - Immich:\n      description: Photo Management (Local)\n      href: http://192.168.8.197:30283\n      icon: immich.svg\n  - YT Archive:\n      description: YouTube Archiver\n      href: http://192.168.8.197:30580\n      icon: youtube.svg\n  - Grocy:\n      description: Household Management\n      href: http://192.168.8.197:30881\n      icon: grocy.svg\n"},"kind":"ConfigMap","metadata":{"annotations":{},"name":"homepage-services-patch","namespace":"homepage"}}
    creationTimestamp: "2026-01-25T15:16:54Z"
    name: homepage-services-patch
    namespace: homepage
    resourceVersion: "765"
    uid: 1f8062b2-ca5b-4e21-9c52-2fda54eca798
- apiVersion: v1
  data:
    widgets.yaml: |
      - search:
          provider: custom
          showSearchSuggestions: false
          target: _blank
          url: https://search.holm.chat/search?q=
      - kubernetes:
          cluster:
            cpu: true
            label: Holm Cluster
            memory: true
            show: true
            showLabel: true
          nodes:
            show: false
      - datetime:
          format:
            dateStyle: long
            timeStyle: short
          text_size: l
  kind: ConfigMap
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","data":{"widgets.yaml":"- search:\n    provider: custom\n    showSearchSuggestions: false\n    target: _blank\n    url: https://search.holm.chat/search?q=\n- kubernetes:\n    cluster:\n      cpu: true\n      label: Holm Cluster\n      memory: true\n      show: true\n      showLabel: true\n    nodes:\n      show: false\n- datetime:\n    format:\n      dateStyle: long\n      timeStyle: short\n    text_size: l\n"},"kind":"ConfigMap","metadata":{"annotations":{},"name":"homepage-widgets-patch","namespace":"homepage"}}
    creationTimestamp: "2026-01-25T15:27:39Z"
    name: homepage-widgets-patch
    namespace: homepage
    resourceVersion: "766"
    uid: bef5ce69-e8ee-45d2-b306-b612d06c7ff2
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      MIIBdjCCAR2gAwIBAgIBADAKBggqhkjOPQQDAjAjMSEwHwYDVQQDDBhrM3Mtc2Vy
      dmVyLWNhQDE3Njg0ODg1OTUwHhcNMjYwMTE1MTQ0OTU1WhcNMzYwMTEzMTQ0OTU1
      WjAjMSEwHwYDVQQDDBhrM3Mtc2VydmVyLWNhQDE3Njg0ODg1OTUwWTATBgcqhkjO
      PQIBBggqhkjOPQMBBwNCAAS5M3qca7X6I+z9JEP6m2z24D0Vxp/N9riBEnGH45Cd
      2BskCdidQJnMjVhm+Cb/XskOINIf6xwmtSvUe0yvjF1eo0IwQDAOBgNVHQ8BAf8E
      BAMCAqQwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUirW/RlF+LEjL/PJV27md
      5o8hlsUwCgYIKoZIzj0EAwIDRwAwRAIgWFi90tm3iGOxztyDXsQS5Xmt3KWl3hX5
      GVkFVp7VWrYCIH350uTqoqKYVuEL3AXTToIVryQVnEEUCxKpDRVjLsm9
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    annotations:
      kubernetes.io/description: Contains a CA bundle that can be used to verify the
        kube-apiserver when using internal endpoints such as the internal service
        IP or kubernetes.default.svc. No other usage is guaranteed across distributions
        of Kubernetes clusters.
    creationTimestamp: "2026-01-20T02:17:49Z"
    name: kube-root-ca.crt
    namespace: homepage
    resourceVersion: "767"
    uid: dc74f1c1-f2d2-4399-801e-551743a0b494
kind: List
metadata:
  resourceVersion: ""
