apiVersion: v1
items:
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: tiktok-archive:apps/Deployment:tiktok-archive/tiktok-archive-backend
      deployment.kubernetes.io/revision: "3"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"tiktok-archive:apps/Deployment:tiktok-archive/tiktok-archive-backend"},"labels":{"app":"tiktok-archive","component":"backend"},"name":"tiktok-archive-backend","namespace":"tiktok-archive"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"tiktok-archive","component":"backend"}},"template":{"metadata":{"labels":{"app":"tiktok-archive","component":"backend"}},"spec":{"containers":[{"env":[{"name":"DATABASE_URL","value":"sqlite:////data/tiktok_archive.db"},{"name":"ARCHIVE_DIR","value":"/data/archive"}],"image":"ghcr.io/timholm/tiktok-archive-backend:latest","livenessProbe":{"httpGet":{"path":"/api/health","port":8000},"initialDelaySeconds":10,"periodSeconds":30},"name":"backend","ports":[{"containerPort":8000}],"readinessProbe":{"httpGet":{"path":"/api/health","port":8000},"initialDelaySeconds":5,"periodSeconds":10},"resources":{"limits":{"cpu":"1000m","memory":"1Gi"},"requests":{"cpu":"100m","memory":"256Mi"}},"volumeMounts":[{"mountPath":"/data","name":"data"}]}],"imagePullSecrets":[{"name":"ghcr-secret"}],"volumes":[{"name":"data","persistentVolumeClaim":{"claimName":"tiktok-archive-data"}}]}}}}
    creationTimestamp: "2026-01-25T20:58:01Z"
    generation: 3
    labels:
      app: tiktok-archive
      component: backend
    name: tiktok-archive-backend
    namespace: tiktok-archive
    resourceVersion: "19532"
    uid: 251bb79b-c1c5-4dda-a257-bc595f7f38c8
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: tiktok-archive
        component: backend
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/restartedAt: "2026-01-25T16:58:16-08:00"
        labels:
          app: tiktok-archive
          component: backend
      spec:
        containers:
        - env:
          - name: DATABASE_URL
            value: sqlite:////data/tiktok_archive.db
          - name: ARCHIVE_DIR
            value: /data/archive
          image: ghcr.io/timholm/tiktok-archive-backend:latest
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /api/health
              port: 8000
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 1
          name: backend
          ports:
          - containerPort: 8000
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /api/health
              port: 8000
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: "1"
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data
            name: data
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: ghcr-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - name: data
          persistentVolumeClaim:
            claimName: tiktok-archive-data
  status:
    conditions:
    - lastTransitionTime: "2026-01-25T21:11:45Z"
      lastUpdateTime: "2026-01-26T01:03:46Z"
      message: ReplicaSet "tiktok-archive-backend-69655c956d" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2026-01-27T01:12:30Z"
      lastUpdateTime: "2026-01-27T01:12:30Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    observedGeneration: 3
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: tiktok-archive:apps/Deployment:tiktok-archive/tiktok-archive-frontend
      deployment.kubernetes.io/revision: "3"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"tiktok-archive:apps/Deployment:tiktok-archive/tiktok-archive-frontend"},"labels":{"app":"tiktok-archive","component":"frontend"},"name":"tiktok-archive-frontend","namespace":"tiktok-archive"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"tiktok-archive","component":"frontend"}},"template":{"metadata":{"labels":{"app":"tiktok-archive","component":"frontend"}},"spec":{"containers":[{"env":[{"name":"VITE_API_URL","value":""}],"image":"ghcr.io/timholm/tiktok-archive-frontend:latest","livenessProbe":{"httpGet":{"path":"/","port":80},"initialDelaySeconds":10,"periodSeconds":30},"name":"frontend","ports":[{"containerPort":80}],"resources":{"limits":{"cpu":"500m","memory":"256Mi"},"requests":{"cpu":"50m","memory":"64Mi"}}}],"imagePullSecrets":[{"name":"ghcr-secret"}]}}}}
    creationTimestamp: "2026-01-25T20:58:00Z"
    generation: 3
    labels:
      app: tiktok-archive
      component: frontend
    name: tiktok-archive-frontend
    namespace: tiktok-archive
    resourceVersion: "1047"
    uid: 3a1513a2-0caf-4491-ba10-2c2b172451d1
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: tiktok-archive
        component: frontend
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/restartedAt: "2026-01-25T16:58:16-08:00"
        labels:
          app: tiktok-archive
          component: frontend
      spec:
        containers:
        - env:
          - name: VITE_API_URL
          image: ghcr.io/timholm/tiktok-archive-frontend:latest
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /
              port: 80
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 1
          name: frontend
          ports:
          - containerPort: 80
            protocol: TCP
          resources:
            limits:
              cpu: 500m
              memory: 256Mi
            requests:
              cpu: 50m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: ghcr-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2026-01-25T20:58:00Z"
      lastUpdateTime: "2026-01-26T00:58:27Z"
      message: ReplicaSet "tiktok-archive-frontend-74d7cfcbb9" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2026-01-27T02:44:24Z"
      lastUpdateTime: "2026-01-27T02:44:24Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 3
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
kind: List
metadata:
  resourceVersion: ""
