apiVersion: v1
items:
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: kube-sentinel:apps/Deployment:kube-sentinel/kube-sentinel
      deployment.kubernetes.io/revision: "8"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"kube-sentinel:apps/Deployment:kube-sentinel/kube-sentinel"},"labels":{"app.kubernetes.io/component":"server","app.kubernetes.io/managed-by":"kustomize","app.kubernetes.io/name":"kube-sentinel","app.kubernetes.io/version":"1.0.0"},"name":"kube-sentinel","namespace":"kube-sentinel"},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/managed-by":"kustomize","app.kubernetes.io/name":"kube-sentinel","app.kubernetes.io/version":"1.0.0"}},"template":{"metadata":{"annotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"8080","prometheus.io/scrape":"true"},"labels":{"app.kubernetes.io/component":"server","app.kubernetes.io/managed-by":"kustomize","app.kubernetes.io/name":"kube-sentinel","app.kubernetes.io/version":"1.0.0"}},"spec":{"containers":[{"args":["--config=/etc/kube-sentinel/config.yaml","--log-level=info"],"image":"ghcr.io/timholm/kube-sentinel:latest","imagePullPolicy":"Always","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/health","port":"http"},"initialDelaySeconds":10,"periodSeconds":30,"timeoutSeconds":5},"name":"kube-sentinel","ports":[{"containerPort":8080,"name":"http","protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/ready","port":"http"},"initialDelaySeconds":5,"periodSeconds":10,"timeoutSeconds":5},"resources":{"limits":{"cpu":"500m","memory":"512Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true},"volumeMounts":[{"mountPath":"/etc/kube-sentinel","name":"config","readOnly":true},{"mountPath":"/tmp","name":"tmp"}]}],"nodeSelector":{"kubernetes.io/os":"linux"},"securityContext":{"fsGroup":1000,"runAsGroup":1000,"runAsNonRoot":true,"runAsUser":1000},"serviceAccountName":"kube-sentinel","tolerations":[{"effect":"NoSchedule","key":"node-role.kubernetes.io/control-plane","operator":"Exists"},{"effect":"NoSchedule","key":"node.cilium.io/agent-not-ready","operator":"Exists"}],"volumes":[{"configMap":{"name":"kube-sentinel-config"},"name":"config"},{"emptyDir":{},"name":"tmp"}]}}}}
    creationTimestamp: "2026-01-20T01:40:31Z"
    generation: 11
    labels:
      app.kubernetes.io/component: server
      app.kubernetes.io/managed-by: kustomize
      app.kubernetes.io/name: kube-sentinel
      app.kubernetes.io/version: 1.0.0
    name: kube-sentinel
    namespace: kube-sentinel
    resourceVersion: "1007"
    uid: 9fc5e741-81d3-4ebf-9e7e-8856769197c4
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/managed-by: kustomize
        app.kubernetes.io/name: kube-sentinel
        app.kubernetes.io/version: 1.0.0
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/restartedAt: "2026-01-24T17:49:54-08:00"
          prometheus.io/path: /metrics
          prometheus.io/port: "8080"
          prometheus.io/scrape: "true"
        labels:
          app.kubernetes.io/component: server
          app.kubernetes.io/managed-by: kustomize
          app.kubernetes.io/name: kube-sentinel
          app.kubernetes.io/version: 1.0.0
      spec:
        containers:
        - args:
          - --config=/etc/kube-sentinel/config.yaml
          - --log-level=info
          image: ghcr.io/timholm/kube-sentinel:latest
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 5
          name: kube-sentinel
          ports:
          - containerPort: 8080
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /ready
              port: http
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 128Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/kube-sentinel
            name: config
            readOnly: true
          - mountPath: /tmp
            name: tmp
        dnsPolicy: ClusterFirst
        nodeSelector:
          kubernetes.io/os: linux
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 1000
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
        serviceAccount: kube-sentinel
        serviceAccountName: kube-sentinel
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoSchedule
          key: node-role.kubernetes.io/control-plane
          operator: Exists
        - effect: NoSchedule
          key: node.cilium.io/agent-not-ready
          operator: Exists
        volumes:
        - configMap:
            defaultMode: 420
            name: kube-sentinel-config
          name: config
        - emptyDir: {}
          name: tmp
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2026-01-20T01:52:37Z"
      lastUpdateTime: "2026-01-25T01:50:36Z"
      message: ReplicaSet "kube-sentinel-5fc444d8c4" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2026-01-27T04:38:48Z"
      lastUpdateTime: "2026-01-27T04:38:48Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 11
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
kind: List
metadata:
  resourceVersion: ""
